<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIê¸°ë°˜ ì¶©ìˆ˜ì—¼ ìê°€ì§„ë‹¨ ì„¤ë¬¸ì§€ - (í•­ì†Œë‹´ì™¸ê³¼-ì²­ì†Œë…„ìš©:13~19ì„¸)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap');
        
        body { 
            font-family: 'Noto Sans KR', sans-serif; 
            margin: 0; 
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: 'ğŸ’Š';
            font-size: 120px;
            position: absolute;
            top: -20px;
            left: -20px;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }
        
        .header::after {
            content: 'ğŸ©º';
            font-size: 120px;
            position: absolute;
            bottom: -20px;
            right: -20px;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite reverse;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        h1 { 
            margin: 0;
            font-size: 28px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            letter-spacing: -0.5px;
        }
        
        .subtitle {
            font-size: 16px;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .important { 
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            font-weight: 500;
            text-align: center;
            position: relative;
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }
        
        .important::before {
            content: 'âš ï¸';
            font-size: 24px;
            margin-right: 10px;
        }
        
        .section { 
            background: #f8f9ff;
            margin: 25px 0;
            padding: 25px;
            border-radius: 20px;
            border-left: 5px solid #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .section h2 {
            color: #667eea;
            margin-top: 0;
            font-size: 22px;
            font-weight: 700;
            display: flex;
            align-items: center;
        }
        
        .section h2::before {
            font-size: 28px;
            margin-right: 12px;
        }
        
        .section h3 {
            color: #764ba2;
            margin-top: 20px;
            font-size: 18px;
            font-weight: 600;
        }
        
        .basic-info h2::before { content: 'ğŸ§‘â€ğŸ“'; }
        .symptoms h2::before { content: 'ğŸ¤’'; }
        .duration h2::before { content: 'â°'; }
        .pain h2::before { content: 'ğŸ˜£'; }
        .tests h2::before { content: 'ğŸ”¬'; }
        .female-section h2::before { content: 'ğŸ‘©'; }
        
        label { 
            display: flex;
            align-items: center;
            margin: 12px 0;
            padding: 12px 15px;
            background: white;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-size: 15px;
        }
        
        label:hover {
            background: #f0f4ff;
            border-color: #667eea;
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.1);
        }
        
        input[type="checkbox"]:checked + label,
        input[type="radio"]:checked + label {
            background: #f0f4ff;
            border-color: #667eea;
        }
        
        input[type="checkbox"], input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.3);
            accent-color: #667eea;
        }
        
        input[type="number"], select {
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
            margin-left: 10px;
            transition: all 0.3s ease;
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        input[type="number"]:focus, select:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .pain-slider {
            margin: 25px 0;
            text-align: center;
        }
        
        .pain-scale {
            width: 100%;
            height: 12px;
            border-radius: 6px;
            background: linear-gradient(to right, #4ade80, #fbbf24, #f87171);
            outline: none;
            margin: 15px 0;
            -webkit-appearance: none;
        }
        
        .pain-scale::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .pain-faces {
            display: flex;
            justify-content: space-between;
            font-size: 28px;
            margin: 15px 0;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 30px;
            cursor: pointer;
            display: block;
            margin: 40px auto;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }
        
        .submit-btn:active {
            transform: translateY(-1px);
        }
        
        .result {
            background: #f8f9ff;
            border-radius: 20px;
            padding: 25px;
            margin-top: 25px;
            border: 2px solid #e0e0e0;
        }
        
        .result h2 {
            color: #667eea;
            margin-top: 0;
            font-size: 24px;
            font-weight: 700;
        }
        
        .diagnosis-item {
            background: white;
            margin: 15px 0;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        
        .diagnosis-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.12);
        }
        
        .diagnosis-1 { border-left-color: #f87171; }
        .diagnosis-2 { border-left-color: #fbbf24; }
        .diagnosis-3 { border-left-color: #60a5fa; }
        
        .high-risk {
            background: linear-gradient(135deg, #f87171 0%, #ef4444 100%);
            color: white;
            border-radius: 20px;
            padding: 20px;
            margin: 25px 0;
            text-align: center;
            font-weight: 600;
            font-size: 18px;
            box-shadow: 0 5px 20px rgba(239, 68, 68, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 5px 20px rgba(239, 68, 68, 0.3); }
            50% { box-shadow: 0 5px 30px rgba(239, 68, 68, 0.5); }
            100% { box-shadow: 0 5px 20px rgba(239, 68, 68, 0.3); }
        }
        
        .urgency-indicator {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            color: white;
            font-size: 13px;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .urgent { background: #ef4444; }
        .moderate { background: #fbbf24; color: #333; }
        .low { background: #4ade80; }
        
        .no-option {
            background: #f5f5f5;
            border: 2px dashed #ccc;
            opacity: 0.8;
        }
        
        .no-option:hover {
            background: #f0f0f0;
            border-color: #999;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AIê¸°ë°˜ ì¶©ìˆ˜ì—¼ ìê°€ì§„ë‹¨ ì„¤ë¬¸ì§€</h1>
            <div class="subtitle">ì²­ì†Œë…„ìš© (13-19ì„¸) | í•­ì†Œë‹´ì™¸ê³¼</div>
        </div>
        
        <div class="content">
            <div class="important">
                ì´ ê²€ì‚¬ëŠ” ì°¸ê³ ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©í•˜ì„¸ìš”. ì •í™•í•œ ì§„ë‹¨ì€ ë°˜ë“œì‹œ ì˜ì‚¬ ì„ ìƒë‹˜ê»˜ ë°›ìœ¼ì…”ì•¼ í•©ë‹ˆë‹¤! ğŸ’œ
            </div>

            <div class="section basic-info">
                <h2>ê¸°ë³¸ ì •ë³´</h2>
                <label>
                    ì„±ë³„:
                    <select id="gender" onchange="toggleFemaleSection()">
                        <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                        <option value="male">ë‚¨ì ğŸ§‘</option>
                        <option value="female">ì—¬ì ğŸ‘©</option>
                    </select>
                </label>
                <label>
                    ë‚˜ì´: <input type="number" id="age" min="13" max="19" placeholder="ë‚˜ì´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"> ì„¸
                </label>
            </div>

            <div class="section tests">
                <h2>ë‹¤ë¥¸ ë³‘ì›ì—ì„œ ë°›ì€ ë°±í˜ˆêµ¬ ê²€ì‚¬ ê²°ê³¼ </h2>
                <label><input type="radio" name="wbc" value="none"> ê²€ì‚¬ ì•ˆ ë°›ìŒ</label>
                <label><input type="radio" name="wbc" value="normal"> ë°±í˜ˆêµ¬ ì •ìƒ (10,000 ë¯¸ë§Œ)</label>
                <label><input type="radio" name="wbc" value="high10"> ë°±í˜ˆêµ¬ ì•½ê°„ ë†’ìŒ (10,000~15,000)</label>
                <label><input type="radio" name="wbc" value="high15"> ë°±í˜ˆêµ¬ ë†’ìŒ (15,000~18,000)</label>
                <label><input type="radio" name="wbc" value="high18"> ë°±í˜ˆêµ¬ ë§¤ìš° ë†’ìŒ (18,000 ì´ìƒ)</label>
            </div>

            <div class="section female-section" id="female_section" style="display: none;">
                <h2>ì—¬ì„± ê´€ë ¨ ì¦ìƒ</h2>
                <label><input type="radio" name="period" value="none"> ìƒë¦¬ ì¤‘ ì•„ë‹˜</label>
                <label><input type="radio" name="period" value="pre"> ìƒë¦¬ ì˜ˆì •ì¼ 1ì£¼ì¼ ì´ë‚´</label>
                <label><input type="radio" name="period" value="during"> ìƒë¦¬ ì¤‘</label>
                <label><input type="radio" name="period" value="irregular"> ìƒë¦¬ ë¶ˆê·œì¹™</label>
                
                <h3>ìƒë¦¬í†µ ê´€ë ¨</h3>
                <label><input type="checkbox" name="female_symptoms" value="usual_cramps"> í‰ì†Œ ìƒë¦¬í†µê³¼ ë¹„ìŠ·í•¨</label>
                <label><input type="checkbox" name="female_symptoms" value="different_pain"> í‰ì†Œ ìƒë¦¬í†µê³¼ ë‹¤ë¥¸ í†µì¦</label>
                <label><input type="checkbox" name="female_symptoms" value="no_cramps_usually"> í‰ì†Œì—” ìƒë¦¬í†µ ì—†ëŠ”ë° ì´ë²ˆì—” ì•„í””</label>
                <label><input type="checkbox" name="female_symptoms" value="mid_cycle"> ë°°ë€ê¸° (ìƒë¦¬ ì¤‘ê°„)</label>
            </div>

            <div class="section symptoms">
                <h2>ì¦ìƒ ì„ íƒ (í•´ë‹¹ë˜ëŠ” ê±° ëª¨ë‘ ì²´í¬!)</h2>
                
                <h3>ğŸŒ¡ï¸ ì—´ê³¼ ì „ì‹ ì¦ìƒ</h3>
                <label><input type="checkbox" name="symptoms" value="fever"> ì—´ì´ ë‚¨ (37.5ë„ ì´ìƒ)</label>
                <label><input type="checkbox" name="symptoms" value="high_fever"> ê³ ì—´ (38.5ë„ ì´ìƒ)</label>
                <label><input type="checkbox" name="symptoms" value="chills"> ì˜¤í•œ (ì¶¥ê³  ë–¨ë¦¼)</label>
                <label><input type="checkbox" name="symptoms" value="fatigue"> ì…ë§› ì—†ìŒ / ë°¥ ëª» ë¨¹ê² ìŒ</label>
                <label><input type="checkbox" name="symptoms" value="weakness"> ì˜¨ëª¸ì— í˜ì´ ì—†ìŒ</label>
                <label class="no-option"><input type="checkbox" name="symptoms" value="no_fever_systemic"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                
                <h3>ğŸ¤¢ ì†Œí™”ê¸° ì¦ìƒ</h3>
                <label><input type="checkbox" name="symptoms" value="vomiting"> êµ¬í†  (í† í•¨)</label>
                <label><input type="checkbox" name="symptoms" value="nausea"> ë©”ìŠ¤êº¼ì›€ (í† í•  ê²ƒ ê°™ìŒ)</label>
                <label><input type="checkbox" name="symptoms" value="diarrhea"> ì„¤ì‚¬</label>
                <label><input type="checkbox" name="symptoms" value="constipation"> ë³€ë¹„</label>
                <label><input type="checkbox" name="symptoms" value="gas"> ê°€ìŠ¤ ì°¸ / ë°©ê·€ ì•ˆ ë‚˜ì˜´</label>
                <label class="no-option"><input type="checkbox" name="symptoms" value="no_gi_symptoms"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                
                <h3>ğŸ˜– ë³µí†µ ìœ„ì¹˜ì™€ íŠ¹ì§•</h3>
                <label><input type="checkbox" name="symptoms" value="ab_pain_periumbilical"> ë°°ê¼½ ì£¼ìœ„ í†µì¦</label>
                <label><input type="checkbox" name="symptoms" value="ab_pain_rlq"> ì˜¤ë¥¸ìª½ ì•„ë«ë°° í†µì¦</label>
                <label><input type="checkbox" name="symptoms" value="ab_pain_llq"> ì™¼ìª½ ì•„ë«ë°° í†µì¦</label>
                <label><input type="checkbox" name="symptoms" value="ab_pain_generalized"> ë°° ì „ì²´ê°€ ì•„í””</label>
                <label><input type="checkbox" name="symptoms" value="ab_pain_upper"> ëª…ì¹˜ ë¶€ìœ„ í†µì¦</label>
                <label><input type="checkbox" name="symptoms" value="pain_migration"> í†µì¦ì´ ë°°ê¼½ â†’ ì˜¤ë¥¸ìª½ ì•„ë˜ë¡œ ì´ë™</label>
                <label><input type="checkbox" name="symptoms" value="pain_walking"> ê±¸ì„ ë•Œ ë” ì•„í””</label>
                <label><input type="checkbox" name="symptoms" value="pain_jumping"> ë›°ë©´ ë°°ê°€ ìš¸ë¦¼</label>
                <label><input type="checkbox" name="symptoms" value="pain_cough"> ê¸°ì¹¨í•  ë•Œ ë°°ê°€ ì•„í””</label>
                <label><input type="checkbox" name="symptoms" value="rebound"> ëˆ„ë¥´ë‹¤ ë—„ ë•Œ ë” ì•„í””</label>
                <label class="no-option"><input type="checkbox" name="symptoms" value="no_abdominal_pain"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                
                <h3>ğŸš¶ ì›€ì§ì„ ê´€ë ¨</h3>
                <label><input type="checkbox" name="symptoms" value="car_pain"> ì°¨ íƒ€ê³  ì˜¬ ë•Œ ìš¸í‰ë¶ˆí‰í•œ ê¸¸ì—ì„œ ì•„íŒ ìŒ</label>
                <label><input type="checkbox" name="symptoms" value="lying_position"> ë‹¤ë¦¬ êµ¬ë¶€ë¦¬ê³  ëˆ„ì›ŒìˆëŠ” ê²Œ í¸í•¨</label>
                <label><input type="checkbox" name="symptoms" value="avoid_movement"> ì›€ì§ì´ê¸° ì‹«ìŒ / ê°€ë§Œíˆ ìˆê³  ì‹¶ìŒ</label>
                <label><input type="checkbox" name="symptoms" value="limping"> ì ˆëšê±°ë¦¬ë©° ê±¸ìŒ</label>
                <label class="no-option"><input type="checkbox" name="symptoms" value="no_movement_symptoms"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                
                <h3>ğŸ’§ ë¹„ë‡¨ê¸° ì¦ìƒ</h3>
                <label><input type="checkbox" name="symptoms" value="dysuria"> ì†Œë³€ ë³¼ ë•Œ ì•„í”” / ë”°ê°€ì›€</label>
                <label><input type="checkbox" name="symptoms" value="frequency"> ì†Œë³€ ìì£¼ ë§ˆë ¤ì›€</label>
                <label><input type="checkbox" name="symptoms" value="urgency"> ì†Œë³€ ì°¸ê¸° í˜ë“¦</label>
                <label><input type="checkbox" name="symptoms" value="hematuria"> ì†Œë³€ì— í”¼ê°€ ì„ì„</label>
                <label><input type="checkbox" name="symptoms" value="flank_pain"> ì˜†êµ¬ë¦¬/ë“± í†µì¦</label>
                <label class="no-option"><input type="checkbox" name="symptoms" value="no_urinary_symptoms"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ</label>
                
                <h3>ğŸƒ ë‚¨ì„± íŠ¹ì´ ì¦ìƒ</h3>
                <label><input type="checkbox" name="symptoms" value="testicular_pain"> ê³ í™˜(ì•Œ) í†µì¦</label>
                <label><input type="checkbox" name="symptoms" value="testicular_swelling"> ê³ í™˜ì´ ë¶€ìŒ</label>
                <label><input type="checkbox" name="symptoms" value="groin_pain"> ì‚¬íƒ€êµ¬ë‹ˆ í†µì¦</label>
                <label class="no-option"><input type="checkbox" name="symptoms" value="no_male_symptoms"> âŒ í•´ë‹¹ì‚¬í•­ ì—†ìŒ (ë˜ëŠ” ì—¬ì„±)</label>
            </div>

            <div class="section duration">
                <h2>ì¦ìƒì´ ì–¸ì œë¶€í„° ì‹œì‘ëë‚˜ìš”?</h2>
                <label><input type="radio" name="duration" value="6h"> 6ì‹œê°„ ì´ë‚´</label>
                <label><input type="radio" name="duration" value="12h"> 12ì‹œê°„ ì´ë‚´</label>
                <label><input type="radio" name="duration" value="24h"> 1ì¼ ì´ë‚´</label>
                <label><input type="radio" name="duration" value="48h"> 2ì¼ ì´ë‚´</label>
                <label><input type="radio" name="duration" value="72h"> 3ì¼ ì´ìƒ</label>
            </div>

            <div class="section pain">
                <h2>ì•„í”ˆ ì •ë„ë¥¼ í‘œì‹œí•´ì£¼ì„¸ìš”</h2>
                <div class="pain-slider">
                    <div class="pain-faces">
                        <span>ğŸ˜Š</span><span>ğŸ™‚</span><span>ğŸ˜</span><span>ğŸ˜Ÿ</span><span>ğŸ˜£</span><span>ğŸ˜«</span><span>ğŸ˜°</span><span>ğŸ˜­</span><span>ğŸ˜±</span><span>ğŸ¤¯</span>
                    </div>
                    <input type="range" id="pain_scale" name="pain_scale" min="0" max="10" value="0" class="pain-scale" 
                           oninput="document.getElementById('pain_output').innerText = this.value">
                    <div style="font-size: 28px; font-weight: bold; color: #667eea; margin-top: 15px;">
                        í†µì¦ ê°•ë„: <span id="pain_output">0</span> / 10
                    </div>
                </div>
            </div>

            <button class="submit-btn" onclick="calculateResult()">ğŸ” ì§„ë‹¨ ê²°ê³¼ í™•ì¸í•˜ê¸°</button>

            <div class="section result" id="result_section" style="display: none;">
                <h2>ğŸ“Š AI ì˜ˆìƒ ì§„ë‹¨ ê²°ê³¼</h2>
                <div id="result"></div>
            </div>
        </div>
    </div>

    <script>
        function toggleFemaleSection() {
            const gender = document.getElementById('gender').value;
            const femaleSection = document.getElementById('female_section');
            femaleSection.style.display = gender === 'female' ? 'block' : 'none';
        }

        function calculateResult() {
            const age = parseInt(document.getElementById('age').value) || 0;
            const gender = document.getElementById('gender').value;
            const symptoms = Array.from(document.querySelectorAll('input[name="symptoms"]:checked')).map(e => e.value);
            const femaleSymptoms = Array.from(document.querySelectorAll('input[name="female_symptoms"]:checked')).map(e => e.value);
            const duration = document.querySelector('input[name="duration"]:checked')?.value || '';
            const wbc = document.querySelector('input[name="wbc"]:checked')?.value || '';
            const period = document.querySelector('input[name="period"]:checked')?.value || '';
            const pain = parseInt(document.getElementById('pain_scale').value);

            let scores = {
                'ê¸‰ì„± ì¶©ìˆ˜ì—¼': 0,
                'ê¸‰ì„± ì¶©ìˆ˜ì—¼(ì²œê³µ ìœ„í—˜)': 0,
                'ì¥ì—¼/ìœ„ì¥ì—¼': 0,
                'ê³¼ë¯¼ì„± ëŒ€ì¥ì¦í›„êµ°': 0,
                'ìš”ë¡œê°ì—¼': 0,
                'ì‹ ì¥ê²°ì„': 0,
                'ë³€ë¹„': 0,
                'í¬ë¡ ë³‘/ê¶¤ì–‘ì„±ëŒ€ì¥ì—¼': 0,
                'ìƒë¦¬í†µ/ì›”ê²½ê³¤ë€ì¦': 0,
                'ë‚œì†Œë‚­ì¢… íŒŒì—´': 0,
                'ê³ í™˜ì—¼ì „': 0
            };

            // ê¸‰ì„± ì¶©ìˆ˜ì—¼ ì ìˆ˜ ê³„ì‚°
            if (symptoms.includes('pain_migration')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 20;
            if (symptoms.includes('ab_pain_rlq')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 15;
            if (symptoms.includes('ab_pain_periumbilical')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 10;
            if (symptoms.includes('vomiting')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 10;
            if (symptoms.includes('fever')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (symptoms.includes('fatigue')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (symptoms.includes('nausea')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 6;
            if (symptoms.includes('rebound')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 12;
            
            // ì›€ì§ì„ ê´€ë ¨ ì§•í›„
            if (symptoms.includes('car_pain')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 12;
            if (symptoms.includes('lying_position')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (symptoms.includes('avoid_movement')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (symptoms.includes('pain_walking')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 10;
            if (symptoms.includes('pain_jumping')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 10;
            if (symptoms.includes('pain_cough')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (symptoms.includes('limping')) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 6;
            
            // ê²€ì‚¬ ê²°ê³¼
            if (wbc === 'high10') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (wbc === 'high15') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 10;
            if (wbc === 'high18') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 15;
            
            // ê¸°ê°„ë³„ ê°€ì¤‘ì¹˜
            if (duration === '12h') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 3;
            if (duration === '24h') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 5;
            if (duration === '48h') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 8;
            if (duration === '72h') scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 10;
            
            // í†µì¦ ê°•ë„
            if (pain >= 7) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 10;
            else if (pain >= 5) scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] += 6;
            
            // ì²œê³µ ìœ„í—˜ë„ í‰ê°€
            let perforationRisk = 0;
            if (symptoms.includes('high_fever')) perforationRisk += 3;
            if (wbc === 'high18') perforationRisk += 3;
            if (duration === '48h') perforationRisk += 2;
            if (duration === '72h') perforationRisk += 3;
            if (symptoms.includes('ab_pain_generalized')) perforationRisk += 2;
            if (symptoms.includes('chills')) perforationRisk += 2;
            
            if (scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] > 40 && perforationRisk >= 5) {
                scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼(ì²œê³µ ìœ„í—˜)'] = scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] + perforationRisk * 5;
                scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] = Math.max(0, scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] - 20);
            }

            // ì¥ì—¼/ìœ„ì¥ì—¼
            if (symptoms.includes('diarrhea')) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 20;
            if (symptoms.includes('vomiting')) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 10;
            if (symptoms.includes('nausea')) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 8;
            if (symptoms.includes('fever')) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 6;
            if (symptoms.includes('ab_pain_generalized')) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 10;
            if (pain < 6) scores['ì¥ì—¼/ìœ„ì¥ì—¼'] += 5;

            // ê³¼ë¯¼ì„± ëŒ€ì¥ì¦í›„êµ°
            if (symptoms.includes('ab_pain_generalized')) scores['ê³¼ë¯¼ì„± ëŒ€ì¥ì¦í›„êµ°'] += 8;
            if (symptoms.includes('gas')) scores['ê³¼ë¯¼ì„± ëŒ€ì¥ì¦í›„êµ°'] += 10;
            if (symptoms.includes('constipation') || symptoms.includes('diarrhea')) scores['ê³¼ë¯¼ì„± ëŒ€ì¥ì¦í›„êµ°'] += 8;
            if (!symptoms.includes('fever')) scores['ê³¼ë¯¼ì„± ëŒ€ì¥ì¦í›„êµ°'] += 10;
            if (duration === '72h') scores['ê³¼ë¯¼ì„± ëŒ€ì¥ì¦í›„êµ°'] += 5;
            if (pain < 6) scores['ê³¼ë¯¼ì„± ëŒ€ì¥ì¦í›„êµ°'] += 5;

            // ìš”ë¡œê°ì—¼
            if (symptoms.includes('dysuria')) scores['ìš”ë¡œê°ì—¼'] += 20;
            if (symptoms.includes('frequency')) scores['ìš”ë¡œê°ì—¼'] += 15;
            if (symptoms.includes('urgency')) scores['ìš”ë¡œê°ì—¼'] += 12;
            if (symptoms.includes('fever')) scores['ìš”ë¡œê°ì—¼'] += 10;
            if (symptoms.includes('flank_pain')) scores['ìš”ë¡œê°ì—¼'] += 8;
            if (gender === 'female') scores['ìš”ë¡œê°ì—¼'] += 5;

            // ì‹ ì¥ê²°ì„
            if (symptoms.includes('flank_pain')) scores['ì‹ ì¥ê²°ì„'] += 20;
            if (symptoms.includes('hematuria')) scores['ì‹ ì¥ê²°ì„'] += 15;
            if (symptoms.includes('dysuria')) scores['ì‹ ì¥ê²°ì„'] += 8;
            if (pain >= 8) scores['ì‹ ì¥ê²°ì„'] += 10;
            if (symptoms.includes('vomiting')) scores['ì‹ ì¥ê²°ì„'] += 6;

            // ë³€ë¹„
            if (symptoms.includes('constipation')) scores['ë³€ë¹„'] += 20;
            if (symptoms.includes('ab_pain_generalized')) scores['ë³€ë¹„'] += 8;
            if (symptoms.includes('gas')) scores['ë³€ë¹„'] += 10;
            if (!symptoms.includes('fever')) scores['ë³€ë¹„'] += 8;
            if (pain < 6) scores['ë³€ë¹„'] += 5;

            // í¬ë¡ ë³‘/ê¶¤ì–‘ì„±ëŒ€ì¥ì—¼
            if (symptoms.includes('diarrhea')) scores['í¬ë¡ ë³‘/ê¶¤ì–‘ì„±ëŒ€ì¥ì—¼'] += 8;
            if (symptoms.includes('ab_pain_generalized')) scores['í¬ë¡ ë³‘/ê¶¤ì–‘ì„±ëŒ€ì¥ì—¼'] += 6;
            if (symptoms.includes('weakness')) scores['í¬ë¡ ë³‘/ê¶¤ì–‘ì„±ëŒ€ì¥ì—¼'] += 6;
            if (duration === '72h') scores['í¬ë¡ ë³‘/ê¶¤ì–‘ì„±ëŒ€ì¥ì—¼'] += 8;
            if (symptoms.includes('fever')) scores['í¬ë¡ ë³‘/ê¶¤ì–‘ì„±ëŒ€ì¥ì—¼'] += 4;

            // ì—¬ì„± íŠ¹ì´ ì§ˆí™˜
            if (gender === 'female') {
                // ìƒë¦¬í†µ/ì›”ê²½ê³¤ë€ì¦
                if (period === 'during' || period === 'pre') scores['ìƒë¦¬í†µ/ì›”ê²½ê³¤ë€ì¦'] += 15;
                if (femaleSymptoms.includes('usual_cramps')) scores['ìƒë¦¬í†µ/ì›”ê²½ê³¤ë€ì¦'] += 20;
                if (symptoms.includes('ab_pain_llq')) scores['ìƒë¦¬í†µ/ì›”ê²½ê³¤ë€ì¦'] += 8;
                if (!symptoms.includes('fever')) scores['ìƒë¦¬í†µ/ì›”ê²½ê³¤ë€ì¦'] += 5;
                
                // ë‚œì†Œë‚­ì¢… íŒŒì—´
                if (femaleSymptoms.includes('different_pain')) scores['ë‚œì†Œë‚­ì¢… íŒŒì—´'] += 10;
                if (femaleSymptoms.includes('no_cramps_usually')) scores['ë‚œì†Œë‚­ì¢… íŒŒì—´'] += 8;
                if (femaleSymptoms.includes('mid_cycle')) scores['ë‚œì†Œë‚­ì¢… íŒŒì—´'] += 12;
                if (symptoms.includes('ab_pain_rlq') || symptoms.includes('ab_pain_llq')) scores['ë‚œì†Œë‚­ì¢… íŒŒì—´'] += 8;
                if (pain >= 7) scores['ë‚œì†Œë‚­ì¢… íŒŒì—´'] += 6;
            }

            // ë‚¨ì„± íŠ¹ì´ ì§ˆí™˜
            if (gender === 'male') {
                if (symptoms.includes('testicular_pain')) scores['ê³ í™˜ì—¼ì „'] += 25;
                if (symptoms.includes('testicular_swelling')) scores['ê³ í™˜ì—¼ì „'] += 20;
                if (symptoms.includes('groin_pain')) scores['ê³ í™˜ì—¼ì „'] += 15;
                if (symptoms.includes('ab_pain_rlq') || symptoms.includes('ab_pain_llq')) scores['ê³ í™˜ì—¼ì „'] += 8;
                if (symptoms.includes('vomiting')) scores['ê³ í™˜ì—¼ì „'] += 6;
            }

            // 'í•´ë‹¹ì‚¬í•­ ì—†ìŒ' ì„ íƒ ì‹œ ì ìˆ˜ ì¡°ì •
            if (symptoms.includes('no_fever_systemic')) {
                scores['ì¥ì—¼/ìœ„ì¥ì—¼'] -= 5;
                scores['ìš”ë¡œê°ì—¼'] -= 5;
                scores['í¬ë¡ ë³‘/ê¶¤ì–‘ì„±ëŒ€ì¥ì—¼'] -= 3;
            }
            
            if (symptoms.includes('no_gi_symptoms')) {
                scores['ì¥ì—¼/ìœ„ì¥ì—¼'] -= 20;
                scores['ê³¼ë¯¼ì„± ëŒ€ì¥ì¦í›„êµ°'] -= 15;
                scores['ë³€ë¹„'] -= 15;
                scores['í¬ë¡ ë³‘/ê¶¤ì–‘ì„±ëŒ€ì¥ì—¼'] -= 10;
                scores['ê¸‰ì„± ì¶©ìˆ˜ì—¼'] -= 5;
            }
            
            if (symptoms.includes('no_abdominal_pain')) {
                Object.keys(scores).forEach(disease => {
                    if (disease !== 'ê³ í™˜ì—¼ì „') {
                        scores[disease] -= 20;
                    }
                });
            }
            
            if (symptoms.includes('no_urinary_symptoms')) {
                scores['ìš”ë¡œê°ì—¼'] -= 25;
                scores['ì‹ ì¥ê²°ì„'] -= 20;
            }

            // ìŒìˆ˜ ì ìˆ˜ë¥¼ 0ìœ¼ë¡œ ì¡°ì •
            Object.keys(scores).forEach(disease => {
                scores[disease] = Math.max(0, scores[disease]);
            });

            // ì´í•© ê³„ì‚° ë° í¼ì„¼íŠ¸ ë³€í™˜
            const total = Math.max(Object.values(scores).reduce((a, b) => a + b, 0), 1);
            const percentages = Object.keys(scores).map(disease => {
                return [disease, Math.round((scores[disease] / total) * 100)];
            });

            // ìƒìœ„ 3ê°œ ì§ˆí™˜ ì„ íƒ
            percentages.sort((a, b) => b[1] - a[1]);
            const top3 = percentages.slice(0, 3).filter(item => item[1] > 0);

            // ì§„ë£Œê³¼ ë° ê²€ì‚¬ ì¶”ì²œ
            const recommendations = {
                'ê¸‰ì„± ì¶©ìˆ˜ì—¼': {
                    dept: 'ì™¸ê³¼ ì§„ë£Œ',
                    tests: 'CT, ì´ˆìŒíŒŒ, í˜ˆì•¡ê²€ì‚¬',
                    urgency: 'urgent'
                },
                'ê¸‰ì„± ì¶©ìˆ˜ì—¼(ì²œê³µ ìœ„í—˜)': {
                    dept: 'ì™¸ê³¼ ì‘ê¸‰ì§„ë£Œ',
                    tests: 'CT, í˜ˆì•¡ê²€ì‚¬, ì‘ê¸‰ìˆ˜ìˆ  ì¤€ë¹„',
                    urgency: 'urgent'
                },
                'ì¥ì—¼/ìœ„ì¥ì—¼': {
                    dept: 'ë‚´ê³¼ ë˜ëŠ” ê°€ì •ì˜í•™ê³¼',
                    tests: 'ëŒ€ë³€ê²€ì‚¬, í˜ˆì•¡ê²€ì‚¬',
                    urgency: 'moderate'
                },
                'ê³¼ë¯¼ì„± ëŒ€ì¥ì¦í›„êµ°': {
                    dept: 'ë‚´ê³¼ ë˜ëŠ” ê°€ì •ì˜í•™ê³¼',
                    tests: 'ëŒ€ì¥ë‚´ì‹œê²½ (í•„ìš”ì‹œ)',
                    urgency: 'low'
                },
                'ìš”ë¡œê°ì—¼': {
                    dept: 'ë‚´ê³¼ ë˜ëŠ” ë¹„ë‡¨ì˜í•™ê³¼',
                    tests: 'ì†Œë³€ê²€ì‚¬, í˜ˆì•¡ê²€ì‚¬',
                    urgency: 'moderate'
                },
                'ì‹ ì¥ê²°ì„': {
                    dept: 'ë¹„ë‡¨ì˜í•™ê³¼ ì‘ê¸‰ì§„ë£Œ',
                    tests: 'CT, ì†Œë³€ê²€ì‚¬',
                    urgency: 'urgent'
                },
                'ë³€ë¹„': {
                    dept: 'ë‚´ê³¼ ë˜ëŠ” ê°€ì •ì˜í•™ê³¼',
                    tests: 'X-ray (í•„ìš”ì‹œ)',
                    urgency: 'low'
                },
                'í¬ë¡ ë³‘/ê¶¤ì–‘ì„±ëŒ€ì¥ì—¼': {
                    dept: 'ì†Œí™”ê¸°ë‚´ê³¼',
                    tests: 'ëŒ€ì¥ë‚´ì‹œê²½, í˜ˆì•¡ê²€ì‚¬',
                    urgency: 'moderate'
                },
                'ìƒë¦¬í†µ/ì›”ê²½ê³¤ë€ì¦': {
                    dept: 'ì‚°ë¶€ì¸ê³¼',
                    tests: 'ì´ˆìŒíŒŒ (í•„ìš”ì‹œ)',
                    urgency: 'low'
                },
                'ë‚œì†Œë‚­ì¢… íŒŒì—´': {
                    dept: 'ì‚°ë¶€ì¸ê³¼ ì‘ê¸‰ì§„ë£Œ',
                    tests: 'ì´ˆìŒíŒŒ, í˜ˆì•¡ê²€ì‚¬',
                    urgency: 'urgent'
                },
                'ê³ í™˜ì—¼ì „': {
                    dept: 'ë¹„ë‡¨ì˜í•™ê³¼ ì‘ê¸‰ì§„ë£Œ',
                    tests: 'ì´ˆìŒíŒŒ, ë„í”ŒëŸ¬ê²€ì‚¬',
                    urgency: 'urgent'
                }
            };

            // ì‘ê¸‰ ìƒí™© ì²´í¬
            let isHighRisk = false;
            let riskFactors = [];
            
            if (symptoms.includes('high_fever') && (symptoms.includes('ab_pain_rlq') || symptoms.includes('pain_migration'))) {
                isHighRisk = true;
                riskFactors.push('ê³ ì—´ê³¼ ì¶©ìˆ˜ì—¼ ì˜ì‹¬ ì¦ìƒ');
            }
            if (wbc === 'high18') {
                isHighRisk = true;
                riskFactors.push('ë°±í˜ˆêµ¬ ìˆ˜ì¹˜ ë§¤ìš° ë†’ìŒ');
            }
            if (pain >= 8 && symptoms.includes('avoid_movement')) {
                isHighRisk = true;
                riskFactors.push('ì‹¬í•œ í†µì¦ê³¼ ì›€ì§ì„ ê¸°í”¼');
            }
            if (gender === 'male' && symptoms.includes('testicular_pain')) {
                isHighRisk = true;
                riskFactors.push('ê³ í™˜ í†µì¦ (ê³ í™˜ì—¼ì „ ì˜ì‹¬)');
            }
            if (symptoms.includes('rebound') && symptoms.includes('ab_pain_rlq')) {
                isHighRisk = true;
                riskFactors.push('ë°˜ë°œí†µê³¼ ìš°í•˜ë³µë¶€ í†µì¦');
            }

            // ê²°ê³¼ ì¶œë ¥
            let resultHTML = '';
            
            if (isHighRisk) {
                resultHTML += `<div class="high-risk">
                    ğŸš¨ <strong>ì‘ê¸‰ìƒí™© ì˜ì‹¬!</strong><br>
                    ì¦‰ì‹œ ì‘ê¸‰ì‹¤ë¡œ ê°€ì„¸ìš”!<br>
                    <small>ìœ„í—˜ìš”ì¸: ${riskFactors.join(', ')}</small>
                </div>`;
            }

            if (top3.length === 0) {
                resultHTML += `<div class="diagnosis-item">
                    <strong>ì¦ìƒì´ ëšœë ·í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</strong><br>
                    ì¦ìƒì´ ì§€ì†ë˜ê±°ë‚˜ ì•…í™”ë˜ë©´ ë³‘ì›ì„ ë°©ë¬¸í•˜ì„¸ìš”.
                </div>`;
            } else {
                top3.forEach((item, index) => {
                    const [disease, percentage] = item;
                    const rec = recommendations[disease];
                    const urgencyClass = rec.urgency;
                    const urgencyText = urgencyClass === 'urgent' ? 'ì‘ê¸‰' : 
                                      urgencyClass === 'moderate' ? 'ë¹ ë¥¸ ì§„ë£Œ' : 'ì¼ë°˜ ì§„ë£Œ';
                    
                    resultHTML += `
                        <div class="diagnosis-item diagnosis-${index + 1}">
                            <strong>${index + 1}. ${disease}: ${percentage}%</strong>
                            <span class="urgency-indicator ${urgencyClass}">${urgencyText}</span>
                            <br>
                            ğŸ‘¨â€âš•ï¸ ê¶Œì¥ ì§„ë£Œê³¼: ${rec.dept}<br>
                            ğŸ”¬ ê¶Œì¥ ê²€ì‚¬: ${rec.tests}
                        </div>
                    `;
                });
            }

            resultHTML += `
                <div style="margin-top: 25px; padding: 20px; background: #f0f4ff; border-radius: 15px;">
                    <h3 style="color: #667eea; margin-top: 0;">âš ï¸ ì¤‘ìš” ì•ˆë‚´ì‚¬í•­</h3>
                    <ul style="text-align: left; line-height: 1.8;">
                        <li>ì´ ê²°ê³¼ëŠ” <strong>ì°¸ê³ ìš©</strong>ì…ë‹ˆë‹¤. ë°˜ë“œì‹œ ì˜ì‚¬ ì„ ìƒë‹˜ê»˜ ì§„ë£Œë¥¼ ë°›ìœ¼ì„¸ìš”.</li>
                        <li>ì¦ìƒì´ <strong>ì•…í™”</strong>ë˜ê±°ë‚˜ ìƒˆë¡œìš´ ì¦ìƒì´ ë‚˜íƒ€ë‚˜ë©´ ì¦‰ì‹œ ë³‘ì›ì— ê°€ì„¸ìš”.</li>
                        <li>ì‹¬í•œ ë³µí†µ, ê³ ì—´, êµ¬í† ê°€ ì§€ì†ë˜ë©´ <strong>ì‘ê¸‰ì‹¤</strong>ë¡œ ê°€ì„¸ìš”.</li>
                        <li>ê²€ì‚¬ ê²°ê³¼ëŠ” <strong>ê¼­ ê°€ì ¸ê°€ì„¸ìš”</strong> (í˜ˆì•¡ê²€ì‚¬, ì†Œë³€ê²€ì‚¬ ë“±).</li>
                    </ul>
                </div>
            `;

            document.getElementById('result').innerHTML = resultHTML;
            document.getElementById('result_section').style.display = 'block';
            document.getElementById('result_section').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
